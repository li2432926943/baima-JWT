import{o as r,c as C,s as ae,v as se,x as ue,u as ie,b as c,y as de,d as _e,n as A,r as o,z as re,A as fe,B as p,w as t,k as pe,a as e,e as u,f as n,C as me,D as B,F as ce,G as ve,H as L,I as ge,J as xe,K as ye,i as s,t as x,L as S,m as be,M as T,N as we,O as ke,P as Ve,Q as Ce,R as ze,S as De,T as Ie,U as Ne,V as he,W as $e,X as Ae,g as Be,l as Le,Y as Se,Z as Te}from"./index-c67db3df.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";import{u as Ue}from"./index-c2928ce0.js";const Ee={},Fe={class:"light-card"};function Re(z,f){return r(),C("div",Fe,[ae(z.$slots,"default",{},void 0,!0)])}const qe=U(Ee,[["render",Re],["__scopeId","data-v-f9d69f3b"]]);const Ge={class:"main-content","element-loading-text":"正在进入，请稍后..."},He={style:{flex:"1",padding:"0 20px","text-align":"center"}},Je={class:"user-info"},Ke={class:"notification"},Me={style:{"font-weight":"bold"}},Oe={style:{"font-size":"13px",color:"grey"}},Pe={style:{"margin-top":"10px"}},Qe={class:"profile"},We={__name:"IndexView",setup(z){const f=Ue(),y=se(),E=ue(y),F=ie(),R=c(f.avatarUrl);de(y,_=>{document.documentElement.setAttribute("data-theme",_?"dark":"light"),document.documentElement.setAttribute("class",_?"dark":"light"),localStorage.setItem("theme",_?"dark":"light")},{immediate:!0});const b=c(!0),D=c(f.user.username),I=c(f.user.email),v=_e({type:"1",text:""}),m=c([]);setTimeout(()=>{b.value=!1},1e3),A("/api/notification/list",_=>m.value=_),A("/api/user/info",_=>{f.user=_,D.value=f.user.username,I.value=f.user.email});const q=()=>{Te(()=>{F.push("/")})};function Xe(_,l){}function G(){m.value=[]}return(_,l)=>{const H=o("el-image"),a=o("el-icon"),g=o("el-option"),J=o("el-select"),K=o("el-input"),M=o("el-tooltip"),O=o("el-badge"),P=o("el-empty"),N=o("el-tag"),h=o("el-divider"),w=o("el-scrollbar"),Q=o("el-button"),W=o("el-popover"),X=o("el-avatar"),k=o("el-dropdown-item"),Y=o("el-dropdown-menu"),Z=o("el-dropdown"),j=o("el-header"),i=o("el-menu-item"),V=o("el-sub-menu"),ee=o("el-menu"),te=o("el-aside"),le=o("router-view"),ne=o("el-main"),$=o("el-container"),oe=re("loading");return fe((r(),C("div",Ge,[b.value?pe("",!0):(r(),p($,{key:0,style:{height:"100%"}},{default:t(()=>[e(j,{class:"main-content-header"},{default:t(()=>[e(H,{class:"logo",src:"https://element-plus.org/images/element-plus-logo.svg"}),u("div",He,[e(K,{modelValue:v.text,"onUpdate:modelValue":l[1]||(l[1]=d=>v.text=d),style:{width:"100%","max-width":"500px"},placeholder:"搜索论坛相关内容..."},{prefix:t(()=>[e(a,null,{default:t(()=>[e(n(me))]),_:1})]),append:t(()=>[e(J,{style:{width:"120px"},modelValue:v.type,"onUpdate:modelValue":l[0]||(l[0]=d=>v.type=d)},{default:t(()=>[e(g,{value:"1",label:"帖子广场"}),e(g,{value:"2",label:"校园活动"}),e(g,{value:"3",label:"表白墙"}),e(g,{value:"4",label:"教务通知"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),u("div",Je,[e(M,{content:"切换深浅色模式",placement:"bottom"},{default:t(()=>[u("div",{class:"theme-switch",onClick:l[2]||(l[2]=d=>n(E)())},[e(a,null,{default:t(()=>[(r(),p(B(n(y)?n(ce):n(ve))))]),_:1}),l[3]||(l[3]=u("div",{style:{"font-size":"10px"}},"主题",-1))])]),_:1}),e(W,{placement:"bottom",width:350,trigger:"click"},{reference:t(()=>[e(O,{style:{"margin-right":"15px"},"is-dot":"",hidden:!m.value.length},{default:t(()=>[u("div",Ke,[e(a,null,{default:t(()=>[e(n(L))]),_:1}),l[4]||(l[4]=u("div",{style:{"font-size":"10px"}},"消息",-1))])]),_:1},8,["hidden"])]),default:t(()=>[m.value.length?(r(),p(w,{key:1,"max-height":500},{default:t(()=>[(r(!0),C(ge,null,xe(m.value,d=>(r(),p(qe,{class:"notification-item",onClick:Ye=>(d.id,d.url,void 0)},{default:t(()=>[u("div",null,[e(N,{size:"small",type:d.type},{default:t(()=>l[5]||(l[5]=[s("消息")])),_:2},1032,["type"]),l[6]||(l[6]=s("  ")),u("span",Me,x(d.title),1)]),e(h,{style:{margin:"7px 0 3px 0"}}),u("div",Oe,x(d.content),1)]),_:2},1032,["onClick"]))),256))]),_:1})):(r(),p(P,{key:0,"image-size":80,description:"暂时没有未读消息哦~"})),u("div",Pe,[e(Q,{size:"small",type:"info",icon:n(ye),onClick:G,style:{width:"100%"},plain:""},{default:t(()=>l[7]||(l[7]=[s("清除全部未读消息")])),_:1},8,["icon"])])]),_:1}),u("div",Qe,[u("div",null,x(D.value),1),u("div",null,x(I.value),1)]),e(Z,null,{dropdown:t(()=>[e(Y,null,{default:t(()=>[e(k,null,{default:t(()=>[e(a,null,{default:t(()=>[e(n(S))]),_:1}),l[8]||(l[8]=s(" 个人设置 "))]),_:1}),e(k,null,{default:t(()=>[e(a,null,{default:t(()=>[e(n(be))]),_:1}),l[9]||(l[9]=s(" 消息列表 "))]),_:1}),e(k,{onClick:q,divided:""},{default:t(()=>[e(a,null,{default:t(()=>[e(n(T))]),_:1}),l[10]||(l[10]=s(" 退出登录 "))]),_:1})]),_:1})]),default:t(()=>[e(X,{src:R.value},null,8,["src"])]),_:1})])]),_:1}),e($,null,{default:t(()=>[e(te,{width:"230px"},{default:t(()=>[e(w,{style:{height:"calc(100vh - 55px)"}},{default:t(()=>[e(ee,{router:"","default-active":_.$route.path,"default-openeds":["1","2","3"],style:{"min-height":"calc(100vh - 55px)"}},{default:t(()=>[e(V,{index:"1"},{title:t(()=>[e(a,null,{default:t(()=>[e(n(we))]),_:1}),l[11]||(l[11]=u("span",null,[u("b",null,"校园论坛")],-1))]),default:t(()=>[e(i,{index:"/index"},{title:t(()=>[e(a,null,{default:t(()=>[e(n(ke))]),_:1}),l[12]||(l[12]=s(" 帖子广场 "))]),_:1}),e(i,null,{title:t(()=>[e(a,null,{default:t(()=>[e(n(L))]),_:1}),l[13]||(l[13]=s(" 失物招领 "))]),_:1}),e(i,null,{title:t(()=>[e(a,null,{default:t(()=>[e(n(Ve))]),_:1}),l[14]||(l[14]=s(" 校园活动 "))]),_:1}),e(i,null,{title:t(()=>[e(a,null,{default:t(()=>[e(n(Ce))]),_:1}),l[15]||(l[15]=s(" 表白墙 "))]),_:1}),e(i,null,{title:t(()=>[e(a,null,{default:t(()=>[e(n(ze))]),_:1}),l[17]||(l[17]=s(" 海文考研 ")),e(N,{style:{"margin-left":"10px"},size:"small"},{default:t(()=>l[16]||(l[16]=[s("合作机构")])),_:1})]),_:1})]),_:1}),e(V,{index:"2"},{title:t(()=>[e(a,null,{default:t(()=>[e(n(De))]),_:1}),l[18]||(l[18]=u("span",null,[u("b",null,"探索与发现")],-1))]),default:t(()=>[e(i,null,{title:t(()=>[e(a,null,{default:t(()=>[e(n(Ie))]),_:1}),l[19]||(l[19]=s(" 成绩查询 "))]),_:1}),e(i,null,{title:t(()=>[e(a,null,{default:t(()=>[e(n(Ne))]),_:1}),l[20]||(l[20]=s(" 班级课程表 "))]),_:1}),e(i,null,{title:t(()=>[e(a,null,{default:t(()=>[e(n(he))]),_:1}),l[21]||(l[21]=s(" 教务通知 "))]),_:1}),e(i,null,{title:t(()=>[e(a,null,{default:t(()=>[e(n($e))]),_:1}),l[22]||(l[22]=s(" 在线图书馆 "))]),_:1}),e(i,null,{title:t(()=>[e(a,null,{default:t(()=>[e(n(Ae))]),_:1}),l[23]||(l[23]=s(" 预约教室 "))]),_:1})]),_:1}),e(V,{index:"3"},{title:t(()=>[e(a,null,{default:t(()=>[e(n(S))]),_:1}),l[24]||(l[24]=u("span",null,[u("b",null,"个人设置")],-1))]),default:t(()=>[e(i,{index:"/index/user-setting"},{title:t(()=>[e(a,null,{default:t(()=>[e(n(Be))]),_:1}),l[25]||(l[25]=s(" 个人信息设置 "))]),_:1}),e(i,{index:"/index/privacy-setting"},{title:t(()=>[e(a,null,{default:t(()=>[e(n(Le))]),_:1}),l[26]||(l[26]=s(" 账号安全设置 "))]),_:1})]),_:1}),e(h,null,{default:t(()=>l[27]||(l[27]=[s("开发测试区域")])),_:1}),e(i,{index:"/login"},{title:t(()=>[e(a,null,{default:t(()=>[e(n(T))]),_:1}),l[28]||(l[28]=s(" 访问登录页面 "))]),_:1})]),_:1},8,["default-active"])]),_:1})]),_:1}),e(ne,{class:"main-content-page"},{default:t(()=>[e(w,{style:{height:"calc(100vh - 55px)"}},{default:t(()=>[e(le,null,{default:t(({Component:d})=>[e(Se,{name:"el-fade-in-linear",mode:"out-in"},{default:t(()=>[(r(),p(B(d),{style:{height:"100%"}}))]),_:2},1024)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))])),[[oe,b.value]])}}},tt=U(We,[["__scopeId","data-v-215fea88"]]);export{tt as default};
