import{u as A,b as i,d as h,r as _,o as u,c as m,e as o,a as s,f as p,w as t,g as D,t as c,k as w,l as U,m as J,i as V,n as L,E as x,p as M}from"./index-c67db3df.js";import{a as $}from"./anime-bg-a5ff5050.js";import{_ as S}from"./_plugin-vue_export-helper-c27b6911.js";const Z={class:"register-container"},j={class:"register-banner"},G={class:"register-form-container"},H={class:"register-form-wrapper"},K={key:0,class:"error-tip"},O={key:0,class:"error-tip"},Q={key:0,class:"error-tip"},W={key:0,class:"error-tip"},X={class:"verify-code-wrapper"},Y={key:0,class:"error-tip"},ee={__name:"RegisterPage",setup(re){const b=A(),C=i(null),B=i(!1),n=i(0),E=i(""),f=i(""),k=i(""),P=i(""),R=i(""),r=h({username:"",email:"",password:"",confirmPassword:"",verifyCode:""}),N=h({username:[{validator:(d,e,a)=>{e===""?a(new Error("请输入用户名")):/^[a-zA-Z0-9\u4e00-\u9fa5]+$/.test(e)?a():a(new Error("用户名不能包含特殊字符，只能是中文/英文"))},trigger:["blur","change"]},{min:2,max:8,message:"用户名的长度必须在2-8个字符之间",trigger:["blur","change"]}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"密码的长度必须在6-16个字符之间",trigger:["blur","change"]}],confirmPassword:[{validator:(d,e,a)=>{e===""?a(new Error("请再次输入密码")):e!==r.password?a(new Error("两次输入密码不一致!")):a()},trigger:["blur","change"]}],verifyCode:[{required:!0,message:"请输入获取的验证码",trigger:"blur"}]}),q=(d,e)=>{d==="email"&&(B.value=e)},F=async()=>{if(f.value="",!r.email){f.value="请先输入邮箱地址";return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)){f.value="请输入正确的邮箱地址";return}n.value>0||(n.value=60,L(`/api/auth/ask-code?email=${r.email}&type=register`,()=>{x.success(`验证码已发送至邮箱: ${r.email}，请注意查收`);const e=setInterval(()=>{n.value--,n.value===0&&clearInterval(e)},1e3)},void 0))},I=async()=>{C.value.validate(d=>{d?M("/api/auth/register",{username:r.username,password:r.password,email:r.email,code:r.verifyCode},()=>{x.success("注册成功，欢迎加入我们"),b.push("/")}):x.warning("请完整填写注册表单内容！")})},T=()=>{b.push("/")};return(d,e)=>{const a=_("el-image"),g=_("el-input"),v=_("el-form-item"),y=_("el-button"),z=_("el-form");return u(),m("div",Z,[o("div",j,[s(a,{class:"background-image",src:p($),fit:"cover","preview-teleported":!0,"preview-src-list":[p($)]},null,8,["src","preview-src-list"]),e[5]||(e[5]=o("div",{class:"welcome-text"},[o("h1",null,"注册成为我们的一员"),o("p",null,"加入我们的学习平台，开启您的Java学习之旅")],-1))]),o("div",G,[o("div",H,[e[9]||(e[9]=o("h2",{class:"register-title"},"注册账号",-1)),e[10]||(e[10]=o("p",{class:"register-desc"},"填写以下信息完成账号注册",-1)),s(z,{model:r,class:"register-form",rules:N,ref_key:"registerFormRef",ref:C,onValidate:q},{default:t(()=>[s(v,{prop:"username",class:"no-error-margin"},{default:t(()=>[s(g,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=l=>r.username=l),"prefix-icon":p(D),placeholder:"用户名"},null,8,["modelValue","prefix-icon"]),E.value?(u(),m("div",K,c(E.value),1)):w("",!0)]),_:1}),s(v,{prop:"password",class:"no-error-margin"},{default:t(()=>[s(g,{modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=l=>r.password=l),"prefix-icon":p(U),type:"password",placeholder:"密码"},null,8,["modelValue","prefix-icon"]),k.value?(u(),m("div",O,c(k.value),1)):w("",!0)]),_:1}),s(v,{prop:"confirmPassword",class:"no-error-margin"},{default:t(()=>[s(g,{modelValue:r.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=l=>r.confirmPassword=l),"prefix-icon":p(U),type:"password",placeholder:"确认密码"},null,8,["modelValue","prefix-icon"]),P.value?(u(),m("div",Q,c(P.value),1)):w("",!0)]),_:1}),s(v,{prop:"email",class:"no-error-margin"},{default:t(()=>[s(g,{modelValue:r.email,"onUpdate:modelValue":e[3]||(e[3]=l=>r.email=l),"prefix-icon":p(J),placeholder:"邮箱"},null,8,["modelValue","prefix-icon"]),f.value?(u(),m("div",W,c(f.value),1)):w("",!0)]),_:1}),s(v,{prop:"verifyCode",class:"verify-code-item no-error-margin"},{default:t(()=>[o("div",X,[s(g,{modelValue:r.verifyCode,"onUpdate:modelValue":e[4]||(e[4]=l=>r.verifyCode=l),placeholder:"请输入验证码"},null,8,["modelValue"]),s(y,{class:"verify-code-btn",type:"primary",disabled:n.value>0,onClick:F},{default:t(()=>[V(c(n.value>0?`${n.value}秒后重新获取`:"获取验证码"),1)]),_:1},8,["disabled"])]),R.value?(u(),m("div",Y,c(R.value),1)):w("",!0)]),_:1}),s(y,{type:"primary",class:"register-button",onClick:I},{default:t(()=>e[6]||(e[6]=[V("立即注册")])),_:1}),e[8]||(e[8]=o("div",{class:"divider"},[o("span",null,"已有账号")],-1)),s(y,{class:"login-button",onClick:T},{default:t(()=>e[7]||(e[7]=[V("返回登录")])),_:1})]),_:1},8,["model","rules"])])])])}}},ie=S(ee,[["__scopeId","data-v-2ba630e9"]]);export{ie as default};
